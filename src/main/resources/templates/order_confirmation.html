<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Order Confirmation - Bookstore</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
    <div th:replace="~{fragments/header :: nav}"></div>

    <div class="container">
        <div style="max-width: 800px; margin: 0 auto; background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            
            <div style="text-align: center; padding: 2rem 0; border-bottom: 2px solid #eee;">
                <div style="font-size: 3rem; color: #27ae60; margin-bottom: 1rem;">âœ“</div>
                <h1 style="color: #27ae60; margin: 0;">Order Confirmed!</h1>
                <p style="color: #666; margin-top: 0.5rem;">Thank you for your purchase</p>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="margin-bottom: 1rem;">Order Details</h3>
                <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 4px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div>
                            <strong>Order Number:</strong>
                            <div th:text="'#' + ${order.id}" style="font-size: 1.2rem; color: #2c3e50;">#12345</div>
                        </div>
                        <div>
                            <strong>Order Date:</strong>
                            <div th:text="${#temporals.format(order.orderDate, 'MMM dd, yyyy HH:mm')}" style="color: #2c3e50;">Jan 01, 2026</div>
                        </div>
                        <div>
                            <strong>Status:</strong>
                            <div>
                                <span th:text="${order.status}" 
                                      th:class="${order.status == 'PENDING' ? 'badge-pending' : (order.status == 'COMPLETED' ? 'badge-completed' : 'badge-cancelled')}"
                                      style="display: inline-block; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">
                                    PENDING
                                </span>
                            </div>
                        </div>
                        <div>
                            <strong>Total Amount:</strong>
                            <div th:text="'$' + ${#numbers.formatDecimal(order.totalAmount, 1, 2)}" style="font-size: 1.3rem; color: #27ae60; font-weight: 700;">$0.00</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin: 2rem 0;">
                <h3 style="margin-bottom: 1rem;">Order Items</h3>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                            <th style="padding: 0.75rem; text-align: left;">Book</th>
                            <th style="padding: 0.75rem; text-align: center;">Quantity</th>
                            <th style="padding: 0.75rem; text-align: right;">Price</th>
                            <th style="padding: 0.75rem; text-align: right;">Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${order.items}" style="border-bottom: 1px solid #dee2e6;">
                            <td style="padding: 0.75rem;">
                                <div th:text="${item.book.title}" style="font-weight: 600;">Book Title</div>
                                <div th:text="${item.book.author}" style="color: #666; font-size: 0.9rem;">Author</div>
                            </td>
                            <td style="padding: 0.75rem; text-align: center;">
                                <span th:text="${item.quantity}">1</span>
                            </td>
                            <td style="padding: 0.75rem; text-align: right;">
                                <span th:text="'$' + ${#numbers.formatDecimal(item.price, 1, 2)}">$0.00</span>
                            </td>
                            <td style="padding: 0.75rem; text-align: right; font-weight: 600;">
                                <span th:text="'$' + ${#numbers.formatDecimal(item.price * item.quantity, 1, 2)}">$0.00</span>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr style="background: #f8f9fa; font-weight: 700; font-size: 1.1rem;">
                            <td colspan="3" style="padding: 1rem; text-align: right;">Total:</td>
                            <td style="padding: 1rem; text-align: right; color: #27ae60;">
                                <span th:text="'$' + ${#numbers.formatDecimal(order.totalAmount, 1, 2)}">$0.00</span>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>

            <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #eee;">
                <p style="color: #666; margin-bottom: 1.5rem;">
                    A confirmation email has been sent to your registered email address.
                </p>
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <a th:href="@{/orders}" class="btn">View My Orders</a>
                    <a th:href="@{/books}" class="btn" style="background: #95a5a6;">Continue Shopping</a>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>

    <style>
        .badge-pending {
            background: #fff3cd;
            color: #856404;
        }
        .badge-completed {
            background: #d4edda;
            color: #155724;
        }
        .badge-cancelled {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</body>

</html>
